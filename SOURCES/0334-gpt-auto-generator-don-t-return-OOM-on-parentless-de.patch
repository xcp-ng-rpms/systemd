From c8135d12561727f7ed8513cb5f113866ee963194 Mon Sep 17 00:00:00 2001
From: Tomasz Torcz <tomek@pipebreaker.pl>
Date: Wed, 12 Mar 2014 19:25:11 +0100
Subject: [PATCH] gpt-auto-generator: don't return OOM on parentless devices

(cherry-picked from 9c4495ca561624c2f0085507dd1288ed5f1247c5)

Resolves: #1147524
---
 src/gpt-auto-generator/gpt-auto-generator.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/gpt-auto-generator/gpt-auto-generator.c b/src/gpt-auto-generator/gpt-auto-generator.c
index 8436d26..6a4c9d8 100644
--- a/src/gpt-auto-generator/gpt-auto-generator.c
+++ b/src/gpt-auto-generator/gpt-auto-generator.c
@@ -252,7 +252,7 @@ static int enumerate_partitions(struct udev *udev, dev_t dev) {
 
         parent = udev_device_get_parent(d);
         if (!parent)
-                return log_oom();
+                return 0;
 
         r = udev_enumerate_add_match_parent(e, parent);
         if (r < 0)
