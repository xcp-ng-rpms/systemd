From 4c05a1381fbedaebe3832da433e4e10c682d6384 Mon Sep 17 00:00:00 2001
From: Lukas Nykryn <lnykryn@redhat.com>
Date: Fri, 12 Sep 2014 15:23:50 +0200
Subject: [PATCH] systemd-detect-virt: fix detect s390 virtualization

rhel-only patch

Related: #1139149
---
 src/shared/virt.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/shared/virt.c b/src/shared/virt.c
index 5466d97..fca8515 100644
--- a/src/shared/virt.c
+++ b/src/shared/virt.c
@@ -182,9 +182,9 @@ int detect_vm(const char **id) {
                 r = get_status_field("/proc/sysinfo", "VM00 Control Program:", &t);
                 if (r >= 0) {
                         if (streq(t, "z/VM"))
-                                _id = "zvm";
+                                *id = "zvm";
                         else
-                                _id = "kvm";
+                                *id = "kvm";
 
                         return 1;
                 }
