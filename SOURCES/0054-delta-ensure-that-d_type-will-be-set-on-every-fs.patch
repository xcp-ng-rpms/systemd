From 8d48fb915cbfa1b4ad594b597f2567d682bfc635 Mon Sep 17 00:00:00 2001
From: Lukas Nykryn <lnykryn@redhat.com>
Date: Thu, 9 Jan 2014 16:43:00 +0100
Subject: [PATCH] delta: ensure that d_type will be set on every fs

---
 src/delta/delta.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/src/delta/delta.c b/src/delta/delta.c
index b3272d9..193642d 100644
--- a/src/delta/delta.c
+++ b/src/delta/delta.c
@@ -291,6 +291,8 @@ static int enumerate_dir(Hashmap *top, Hashmap *bottom, Hashmap *drops, const ch
                 if (!de)
                         break;
 
+                dirent_ensure_type(d, de);
+
                 if (dropins && de->d_type == DT_DIR && endswith(de->d_name, ".d"))
                         enumerate_dir_d(top, bottom, drops, path, de->d_name);
 
